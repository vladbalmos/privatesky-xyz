System.register(["./p-226ad382.system.js","./p-7db317d0.system.js","./p-57436eba.system.js","./p-5ca8f7bd.system.js"],function(e){"use strict";var t,r,i,n,a,o,s,c;return{setters:[function(e){t=e.r;r=e.h;i=e.g},function(e){n=e.C},function(e){a=e.i;o=e.s;s=e.c},function(e){c=e.T}],execute:function(){function l(){var e=this;var t=e.element;var r=Array.from(e.element.querySelectorAll("psk-chapter"));e.activeChapter=null;var i=t.scrollTop;var n=t.offsetHeight;var a=f(r);u.call(e,a,i,n)}function f(e){var t=[];e.forEach(function(e){var r=e.getAttribute("guid");if(!r){return null}var i=e.getElementsByClassName("card psk-card")?e.getElementsByClassName("card psk-card")[0]:null;if(!i){return null}var n=p(i,t);t.push({guid:r,height:i.offsetHeight,verticalOffset:n,title:e.title})});return t}function u(e,t,r){var i=this;var n=e.find(function(e){return t<=e.verticalOffset&&e.verticalOffset+e.height<=t+r});if(n){i.activeChapter=n.guid;return}var a=e.filter(function(e){return t>=e.verticalOffset&&(t+r<=e.verticalOffset+e.height||t<=e.verticalOffset+e.height)});if(a.length>0){i.activeChapter=a[a.length-1].guid;return}if(e.length>0){i.activeChapter=e[0].guid}}function p(e,t){var r=e.offsetTop;var i=e.offsetHeight;var n=t[t.length-1]?t[t.length-1]:null;if(n){var o=n.verticalOffset,s=n.height;if(o>r||o+s>r+i){var c=a(e,"psk-chapter",2);var l=t.find(function(e){return c&&e.guid===c.getAttribute("guid")});if(l){r+=l.verticalOffset}}}return r}var h=undefined&&undefined.__decorate||function(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a;return n>3&&a&&Object.defineProperty(t,r,a),a};var d=e("psk_page",function(){function e(e){var r=this;t(this,e);this.activeChapter=null;this.chapters=[];this.title="";this.componentFullyLoaded=false;this.__handleScrollEvent=function(e){var t=r;e.preventDefault();e.stopImmediatePropagation();clearTimeout(r.__isScrolling);r.__isScrolling=setTimeout(function(){l.call(t)},100)}}e.prototype.render=function(){this._sendTableOfContentChapters();return r("div",{class:"main-container"},r("nav",null,r("h3",null,this.title)),r("div",{class:"page-content container"},this.componentFullyLoaded?r("slot",null):r("psk-ui-loader",{shouldBeRendered:true})))};e.prototype.receiveChapters=function(e){e.stopImmediatePropagation();if(!e.detail){return}var t=Object.assign({},e.detail);var r=function(e){return t.guid===e.guid};var i=this.chapters.findIndex(r);var n=this.chapters.slice();if(i===-1){n.push(Object.assign({},t));this.chapters=JSON.parse(JSON.stringify(n));return}n[i]=Object.assign({},t);this.chapters=JSON.parse(JSON.stringify(n))};e.prototype._checkForChapterScrolling=function(){var e=this;if(window.location.href.indexOf("chapter=")===-1){return}var t=window.location.href.split("chapter=")[1];setTimeout(function(){o(t,e.element)},50)};e.prototype._sendTableOfContentChapters=function(){s("psk-send-toc",{bubbles:true,composed:true,cancelable:true,detail:{chapters:this.chapters,active:this.activeChapter}},true)};e.prototype.componentDidLoad=function(){this.componentFullyLoaded=true;this._checkForChapterScrolling();this.element.addEventListener("scroll",this.__handleScrollEvent,true)};e.prototype.disconnectedCallback=function(){this.element.removeEventListener("scroll",this.__handleScrollEvent,true)};Object.defineProperty(e.prototype,"element",{get:function(){return i(this)},enumerable:true,configurable:true});return e}());h([n()],d.prototype,"activeChapter",void 0);h([c({description:"This property will be used as the title for the page.",isMandatory:false,propertyType:"string"})],d.prototype,"title",void 0);h([c({description:"This property is the name of the table of content.",isMandatory:false,propertyType:"string"})],d.prototype,"tocTitle",void 0)}}});