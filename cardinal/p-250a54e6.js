import{g as n}from"./p-bd5842d7.js";import{c as t}from"./p-18c69f0f.js";function e(n){let t=this;Object.keys(n).forEach(function(e){t[e]=n[e]})}function l(n,t){try{let e=this;if(e.rootModel){let l=n;return e.parentChain&&(l=`${e.parentChain}.${n}`),e.rootModel.setChainValue(l,t),!0}return!1}catch(n){console.error(n)}return!1}function o(){return o=>{let{componentWillLoad:r,render:i}=o;o.componentWillLoad=function(){let o=this,u=n(o);return o.render=i,o.changeModel=l,o.__assignProperties=e,u.isConnected?0===u.getAttributeNames().filter(n=>"data-view-model"===n.toLowerCase()||!!n.toLowerCase().includes("view-model")||!!u.getAttribute(n).toLowerCase().startsWith("@")).length?r&&r.call(o):new Promise(e=>{!function(e){t("getModelEvent",{bubbles:!0,composed:!0,cancellable:!0,detail:{callback:function(t,l){(function(t,e,l){if(t||!e)return l();let o,r,i,u=this,c=n(u);if(null!==c.getAttribute("data-view-model")&&"psk-for-each"===c.tagName.toLowerCase())return o=c.getAttribute("data-view-model"),u.__assignProperties.call(u,{rootModel:e,parentChain:i=o}),l();if(o=c.getAttribute("view-model"),i=o,null===o&&(null!==(r=null===c.getAttribute("name")||c.getAttribute("name").startsWith("@")?null:c.getAttribute("name"))||null===c.getAttribute("label")||c.getAttribute("label").startsWith("@")||(r=c.getAttribute("label").replace(/( |:|\/|\.|-)/g,"").toLowerCase()),i=r),!o&&!r)return function(t,e,l,o){let r=this;const i=n(r);return Array.from(i.attributes).filter(n=>n.value.startsWith(l)).forEach(n=>{const o=n.value.split(l)[1],i=t?`${t}.${o}`:o;r[n.name]=e.getChainValue(i),e.onChange(i,function(){r[n.name]=e.getChainValue(i)})}),o()}.call(u,i,e,"@",l),function(t,e,l,o){let r=this;const i=n(r);return Array.from(i.attributes).filter(n=>n.name.startsWith(l)).forEach(n=>{const o=n.name.split(l)[1];r[o]=e.getChainValue(t?`${t}.${n.value}`:n.value)}),o()}.call(u,i,e,"view-model-",l),l();function a(n,t){u[n]=e.getChainValue(t),e.onChange(t,function(){u[n]=e.getChainValue(t)})}if(u.__assignProperties.call(u,{rootModel:e,parentChain:i}),o){let n=e.getChainValue(i);return n?(Object.keys(n).forEach(n=>{a(n,`${i}.${n}`)}),function(){const n=`${i}.value`;if(!e.getChainValue(i)||e.getChainValue(n))return l();a("value",n)}(),l()):l()}return l()}).apply(o,[t,l,e])}}},!0,u)}(()=>{e(r&&r.call(o))})}):r&&r.call(o)}}}export{o as B};