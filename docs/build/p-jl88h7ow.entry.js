import{r as t,c as s,h as i}from"./p-8ea06cdd.js";import{C as h}from"./p-2a0df1ef.js";const e=class{constructor(i){t(this,i),this.alertOpened=!1,this._messagesQueue=[],this._messagesContent=[],this.timer=0,this.opened=!1,this.typeOfAlert=[],this.timeAlive=5,this.messagesToDisplay=3,this.openFeedbackHandler=s(this,"openFeedback",7)}closeFeedbackHandler(t){this.alertOpened&&(this.alertOpened=!1);const s=this._messagesContent.indexOf(t.detail);s>-1&&(this.typeOfAlert.splice(s,1),this._messagesContent.splice(s,1),this._messagesContent=this._messagesContent.slice(),this._messagesQueue.length>0&&(this._messagesContent=[...this._messagesContent,this._messagesQueue.shift()]))}componentWillLoad(){this.openFeedbackHandler.emit((t,s,i)=>{this.typeOfAlert.push(i||"toast"),this.alertOpened=!0,t instanceof Array?t.forEach((t,s)=>{this.addToMessageArray.bind(this)(t,s)}):this.addToMessageArray.bind(this)(t,s)})}timerToShow(t){if(this._messagesContent.length>0){const s=(new Date).getTime(),i=t.timer;let e=Math.floor((s-i)/h.MINUTE);switch(setTimeout(()=>{this.timerToShow.bind(this)(t)},h.MINUTE_TICK),setTimeout(()=>{this.timerToShow.bind(this)(t)},h.HOUR_TICK),!0){case e<=0:this.timeMeasure=h.RIGHT_NOW;break;case e<60:this.timer=Math.floor((s-i)/h.MINUTE),this.timeMeasure=h.MINUTES;break;case e>=60:this.timer=Math.floor((s-i)/h.HOUR),this.timeMeasure=h.HOURS}}}addToMessageArray(t,s){const i={content:t,timer:(new Date).getTime(),name:s};this._messagesContent.length+1<=this.messagesToDisplay?this._messagesContent=[...this._messagesContent,i]:this._messagesQueue=[...this._messagesQueue,i]}render(){let t,s=[];return this._messagesContent.forEach((h,e)=>{"toast"===this.typeOfAlert[e]?(t=this.toastRenderer?this.toastRenderer:"psk-ui-toast",this.timerToShow.bind(this)(h),s.push(i(t,{message:h,timeSinceCreation:this.timer,timeMeasure:this.timeMeasure,styleCustomisation:this.styleCustomisation}))):s.push(i(t=this.alertRenderer?this.alertRenderer:"psk-ui-alert",{message:this._messagesContent[this._messagesContent.length-1],typeOfAlert:this.typeOfAlert[e],timeAlive:this.timeAlive,styleCustomisation:this.styleCustomisation}))}),i("div",null,s||null)}static get style(){return":host{top:0;right:0;position:fixed;z-index:999;width:auto}"}};export{e as psk_list_feedbacks};